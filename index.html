<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多规格批量图片拼接工具（序号自定义）</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", Arial, sans-serif;
        }
        body {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f1f1f1;
        }
        .container {
            background: #fff;
            padding: 40px 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 24px;
        }
        .upload-area {
            border: 2px dashed #ccc;
            border-radius: 10px;
            padding: 60px 20px;
            text-align: center;
            margin-bottom: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #fafafa;
        }
        .upload-area:hover {
            border-color: #1677ff;
            background-color: #f5faff;
        }
        .upload-area.active {
            border-color: #1677ff;
            background-color: #f5faff;
        }
        #fileInput {
            display: none;
        }
        .upload-tip {
            color: #666;
            font-size: 16px;
            margin-bottom: 10px;
        }
        .upload-subtip {
            color: #999;
            font-size: 14px;
            line-height: 1.5;
        }
        /* 扩展配置栏：多规格+字体/颜色/大小 */
        .setting-bar {
            background-color: #f8f8f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px 20px;
            align-items: center;
            justify-content: space-between;
        }
        .setting-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .setting-item label {
            font-size: 15px;
            color: #333;
            font-weight: 500;
            white-space: nowrap;
        }
        .setting-item input[type="text"],
        .setting-item select {
            width: 120px;
            padding: 8px 12px;
            border: 1px solid #dcdcdc;
            border-radius: 6px;
            font-size: 15px;
            outline: none;
        }
        .setting-item input[type="text"]:focus,
        .setting-item select:focus {
            border-color: #1677ff;
        }
        .setting-item input[type="range"] {
            width: 150px;
            cursor: pointer;
        }
        .setting-item input[type="color"] {
            width: 40px;
            height: 36px;
            border: 1px solid #dcdcdc;
            border-radius: 6px;
            cursor: pointer;
            padding: 2px;
        }
        .setting-item .num-size-tip {
            color: #666;
            font-size: 14px;
            width: 60px;
        }
        .file-count {
            font-size: 15px;
            color: #666;
            white-space: nowrap;
        }
        .ratio-tip {
            font-size: 14px;
            color: #1677ff;
            font-weight: 500;
            white-space: nowrap;
        }
        .btn-group {
            text-align: center;
            margin-bottom: 30px;
        }
        .btn {
            display: inline-block;
            padding: 14px 36px;
            background-color: #1677ff;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 0 8px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .btn:hover {
            background-color: #0d66e8;
        }
        .btn:disabled {
            background-color: #dcdcdc;
            cursor: not-allowed;
            color: #999;
        }
        .btn-clear {
            background-color: #fff;
            color: #666;
            border: 1px solid #dcdcdc;
        }
        .btn-clear:hover {
            background-color: #f5f5f5;
            color: #333;
        }
        /* 双进度条 */
        .progress-wrapper {
            margin-bottom: 30px;
            display: none;
        }
        .progress-title {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        .progress-container {
            width: 100%;
            height: 8px;
            background-color: #e5e5e5;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #1677ff;
            width: 0%;
            transition: width 0.2s ease;
        }
        .result-area {
            display: none;
            margin-top: 20px;
        }
        .result-title {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 500;
        }
        .result-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }
        .result-item {
            background-color: #f8f8f8;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #eee;
        }
        .item-name {
            color: #333;
            font-size: 15px;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        .download-link {
            display: inline-block;
            color: #1677ff;
            font-size: 14px;
            text-decoration: none;
            padding: 6px 12px;
            border: 1px solid #1677ff;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        .download-link:hover {
            background-color: #1677ff;
            color: #fff;
        }
        /* 响应式适配 */
        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            h1 {
                font-size: 20px;
            }
            .upload-area {
                padding: 40px 10px;
            }
            .btn {
                padding: 12px 24px;
                font-size: 14px;
                margin: 0 5px 10px;
            }
            .setting-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            .setting-item {
                width: 100%;
                justify-content: space-between;
            }
            .setting-item input[type="range"] {
                width: 120px;
            }
        }

        /* 10款基础字体引入 */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Arial+Nova:wght@300;400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Georgia:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Times+New+Roman:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Courier+New:wght@400;700&display=swap');
    </style>
</head>
<body>
    <div class="container">
        <h1>多规格批量图片拼接工具（序号自定义）</h1>
        
        <!-- 上传区域 -->
        <div class="upload-area" id="uploadArea">
            <p class="upload-tip">点击或拖拽图片到此处上传（支持一次性上传200张内）</p>
            <p class="upload-subtip">支持JPG/PNG/BMP | 图片仅本地处理 | 非目标比例图不变形居中填充 | 所有图片100%显示</p>
            <input type="file" id="fileInput" accept="image/*" multiple>
        </div>
        
        <!-- 扩展配置栏：多规格+序号+字体+颜色+大小 -->
        <div class="setting-bar">
            <div class="file-count" id="fileCount">已选择：0 张图片</div>
            
            <div class="setting-item">
                <label for="startNum">初始序号：</label>
                <input type="text" id="startNum" value="1" placeholder="正整数">
            </div>

            <div class="setting-item">
                <label for="targetRatio">拼图规格：</label>
                <select id="targetRatio">
                    <option value="9:16">9:16</option>
                    <option value="16:9">16:9</option>
                    <option value="3:4">3:4</option>
                    <option value="4:3">4:3</option>
                    <option value="1:1">1:1</option>
                </select>
            </div>

            <div class="setting-item">
                <label for="fontFamily">数字字体：</label>
                <select id="fontFamily">
                    <option value="Microsoft YaHei, Arial">微软雅黑</option>
                    <option value="SimSun, serif">宋体</option>
                    <option value="SimHei, sans-serif">黑体</option>
                    <option value="Noto Sans SC, sans-serif">思源黑体</option>
                    <option value="Roboto, sans-serif">Roboto</option>
                    <option value="Open Sans, sans-serif">Open Sans</option>
                    <option value="Montserrat, sans-serif">Montserrat</option>
                    <option value="Lato, sans-serif">Lato</option>
                    <option value="Poppins, sans-serif">Poppins</option>
                    <option value="Arial Nova, sans-serif">Arial Nova</option>
                    <option value="Georgia, serif">Georgia</option>
                    <option value="Times New Roman, serif">Times New Roman</option>
                    <option value="Courier New, monospace">Courier New</option>
                </select>
            </div>

            <div class="setting-item">
                <label for="fontWeight">字体粗细：</label>
                <select id="fontWeight">
                    <option value="100">极细</option>
                    <option value="300">细体</option>
                    <option value="400" selected>常规</option>
                    <option value="600">半粗</option>
                    <option value="700">粗体</option>
                    <option value="900">极粗</option>
                </select>
            </div>

            <div class="setting-item">
                <label for="fontColor">字体颜色：</label>
                <input type="color" id="fontColor" value="#ffffff">
            </div>

            <div class="setting-item">
                <label for="strokeColor">描边颜色：</label>
                <input type="color" id="strokeColor" value="#000000">
            </div>

            <div class="setting-item">
                <label for="numSize">数字大小：</label>
                <input type="range" id="numSize" min="0" max="30" step="0.5" value="12">
                <span class="num-size-tip" id="numSizeTip">12.0%</span>
            </div>
            
            <div class="ratio-tip">3×3网格 | 中间偏下序号 | 9张一组 | 所有图片加载完成后绘制</div>
        </div>
        
        <!-- 操作按钮 -->
        <div class="btn-group">
            <button class="btn" id="combineBtn" disabled>开始批量拼接</button>
            <button class="btn btn-clear" id="clearBtn">清空已选图片</button>
        </div>
        
        <!-- 双进度条 -->
        <div class="progress-wrapper" id="progressWrapper">
            <div class="progress-title">1. 图片加载+序号处理进度：</div>
            <div class="progress-container">
                <div class="progress-bar" id="processProgressBar"></div>
            </div>
            <div class="progress-title" style="margin-top: 10px;">2. 拼图绘制进度：</div>
            <div class="progress-container">
                <div class="progress-bar" id="combineProgressBar"></div>
            </div>
        </div>
        
        <!-- 拼接结果 -->
        <div class="result-area" id="resultArea">
            <h3 class="result-title">拼接结果（点击下载）：</h3>
            <div class="result-list" id="resultList"></div>
        </div>
    </div>

    <script>
        // 核心配置
        const CONFIG = {
            GROUP_NUM: 9,
            MAX_UPLOAD: 200,
            BASE_W: 900,
            BG_COLOR: '#ffffff',
            STROKE_RATIO: 0.03,
            NUM_POS_Y: 0.85,
            // 多规格比例配置
            RATIO_CONFIG: {
                '3:4': {w: 3, h: 4},
                '4:3': {w: 4, h: 3},
                '16:9': {w: 16, h: 9},
                '9:16': {w: 9, h: 16},
                '1:1': {w: 1, h: 1}
            }
        };

        // 全局变量
        let selectedFiles = [];
        let processedImages = [];
        let ratioConfig = CONFIG.RATIO_CONFIG['9:16']; // 默认9:16
        
        // 页面元素
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const fileCount = document.getElementById('fileCount');
        const startNumInput = document.getElementById('startNum');
        const targetRatioSelect = document.getElementById('targetRatio');
        const fontFamilySelect = document.getElementById('fontFamily');
        const fontWeightSelect = document.getElementById('fontWeight');
        const fontColorInput = document.getElementById('fontColor');
        const strokeColorInput = document.getElementById('strokeColor');
        const numSizeSlider = document.getElementById('numSize');
        const numSizeTip = document.getElementById('numSizeTip');
        const combineBtn = document.getElementById('combineBtn');
        const clearBtn = document.getElementById('clearBtn');
        const progressWrapper = document.getElementById('progressWrapper');
        const processProgressBar = document.getElementById('processProgressBar');
        const combineProgressBar = document.getElementById('combineProgressBar');
        const resultArea = document.getElementById('resultArea');
        const resultList = document.getElementById('resultList');

        // 初始化
        function init() {
            // 1. 拖拽上传
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('active');
            });
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('active');
            });
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('active');
                e.dataTransfer.files.length && handleFiles(e.dataTransfer.files);
            });

            // 2. 点击上传
            uploadArea.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', () => handleFiles(fileInput.files));

            // 3. 数字大小滑块
            numSizeSlider.addEventListener('input', () => {
                numSizeTip.textContent = `${numSizeSlider.value}%`;
            });

            // 4. 拼图规格切换
            targetRatioSelect.addEventListener('change', () => {
                ratioConfig = CONFIG.RATIO_CONFIG[targetRatioSelect.value];
            });

            // 5. 按钮事件
            combineBtn.addEventListener('click', startFullProcess);
            clearBtn.addEventListener('click', clearAllFiles);

            // 6. 初始数字校验
            startNumInput.addEventListener('input', () => {
                startNumInput.value = startNumInput.value.replace(/\D/g, '');
                if (startNumInput.value === '') startNumInput.value = 1;
            });
        }

        // 处理上传文件（支持200张）
        function handleFiles(files) {
            const imageFiles = Array.from(files).filter(file => file.type.startsWith('image/'));
            if (imageFiles.length === 0) {
                alert('请选择有效的图片文件（JPG/PNG/BMP）！');
                return;
            }

            const totalAfterAdd = selectedFiles.length + imageFiles.length;
            if (totalAfterAdd > CONFIG.MAX_UPLOAD) {
                const addCount = CONFIG.MAX_UPLOAD - selectedFiles.length;
                selectedFiles = [...selectedFiles, ...imageFiles.slice(0, addCount)];
                alert(`最多支持上传200张图片，已为你截取前${CONFIG.MAX_UPLOAD}张！`);
            } else {
                selectedFiles = [...selectedFiles, ...imageFiles];
            }

            fileCount.textContent = `已选择：${selectedFiles.length} 张图片`;
            combineBtn.disabled = selectedFiles.length === 0;
        }

        // 清空所有
        function clearAllFiles() {
            selectedFiles = [];
            processedImages = [];
            fileInput.value = '';
            startNumInput.value = 1;
            targetRatioSelect.value = '9:16';
            fontFamilySelect.value = 'Microsoft YaHei, Arial';
            fontWeightSelect.value = '400';
            fontColorInput.value = '#ffffff';
            strokeColorInput.value = '#000000';
            numSizeSlider.value = 12;
            numSizeTip.textContent = '12.0%';
            fileCount.textContent = `已选择：0 张图片`;
            combineBtn.disabled = true;
            resultArea.style.display = 'none';
            resultList.innerHTML = '';
            progressWrapper.style.display = 'none';
            processProgressBar.style.width = '0%';
            combineProgressBar.style.width = '0%';
            ratioConfig = CONFIG.RATIO_CONFIG['9:16'];
        }

        // 单张图片处理（不变形+序号自定义）
        function processSingleImage(file, number) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                
                reader.onload = (e) => {
                    const img = new Image();
                    img.crossOrigin = 'anonymous';
                    
                    img.onload = () => {
                        try {
                            // 1. 目标比例适配计算（不变形）
                            const targetRatio = ratioConfig.w / ratioConfig.h;
                            const imgRatio = img.width / img.height;
                            let drawW, drawH, offsetX = 0, offsetY = 0;

                            if (imgRatio > targetRatio) {
                                drawH = img.height;
                                drawW = img.height * targetRatio;
                                offsetX = (img.width - drawW) / 2;
                            } else {
                                drawW = img.width;
                                drawH = img.width / targetRatio;
                                offsetY = (img.height - drawH) / 2;
                            }

                            // 2. 计算基础尺寸（按比例）
                            let baseW, baseH;
                            if (ratioConfig.w > ratioConfig.h) {
                                baseW = CONFIG.BASE_W;
                                baseH = (CONFIG.BASE_W / ratioConfig.w) * ratioConfig.h;
                            } else {
                                baseH = (CONFIG.BASE_W / 9) * 16; // 保持基础高度一致
                                baseW = (baseH / ratioConfig.h) * ratioConfig.w;
                            }

                            // 3. 创建画布
                            const canvas = document.createElement('canvas');
                            canvas.width = baseW;
                            canvas.height = baseH;
                            const ctx = canvas.getContext('2d');

                            // 4. 填充背景
                            ctx.fillStyle = CONFIG.BG_COLOR;
                            ctx.fillRect(0, 0, canvas.width, canvas.height);

                            // 5. 绘制原图（不变形居中）
                            ctx.drawImage(
                                img,
                                offsetX, offsetY, drawW, drawH,
                                0, 0, canvas.width, canvas.height
                            );

                            // 6. 自定义序号样式
                            const numSizeRatio = parseFloat(numSizeSlider.value) / 100;
                            const fontSize = baseH * numSizeRatio;
                            const strokeWidth = fontSize * CONFIG.STROKE_RATIO;

                            // 获取用户选择的样式
                            const fontFamily = fontFamilySelect.value;
                            const fontWeight = fontWeightSelect.value;
                            const fontColor = fontColorInput.value;
                            const strokeColor = strokeColorInput.value;

                            // 设置序号样式
                            ctx.font = `${fontWeight} ${fontSize}px ${fontFamily}`;
                            ctx.textAlign = 'center';
                            ctx.textBaseline = 'middle';
                            ctx.fillStyle = fontColor;
                            ctx.strokeStyle = strokeColor;
                            ctx.lineWidth = strokeWidth;

                            // 序号位置（中间偏下）
                            const x = canvas.width / 2;
                            const y = canvas.height * CONFIG.NUM_POS_Y;
                            const text = number.toString();

                            // 绘制序号（描边+填充，醒目无背景）
                            ctx.strokeText(text, x, y);
                            ctx.fillText(text, x, y);

                            // 7. 转换为Blob
                            canvas.toBlob((blob) => {
                                if (blob) {
                                    resolve({
                                        blob: blob,
                                        width: canvas.width,
                                        height: canvas.height,
                                        number: number,
                                        img: img // 保留原图引用，确保加载完成
                                    });
                                } else {
                                    reject(new Error(`图片${file.name}转换失败`));
                                }
                            }, 'image/jpeg', 1.0);
                        } catch (err) {
                            reject(new Error(`图片${file.name}处理失败：${err.message}`));
                        }
                    };

                    img.onerror = () => {
                        reject(new Error(`图片${file.name}加载失败，请检查文件是否损坏`));
                    };

                    img.src = e.target.result;
                };

                reader.onerror = () => {
                    reject(new Error(`文件${file.name}读取失败`));
                };

                reader.readAsDataURL(file);
            });
        }

        // 批量处理所有图片（确保全部加载完成）
        async function batchProcessImages(startNum) {
            processedImages = [];
            const total = selectedFiles.length;
            
            // 按顺序处理，确保所有图片加载完成
            for (let i = 0; i < total; i++) {
                try {
                    const currentNum = startNum + i;
                    const processedImg = await processSingleImage(selectedFiles[i], currentNum);
                    processedImages.push(processedImg);
                } catch (err) {
                    console.warn(err.message);
                    alert(err.message + '，已跳过该图片继续处理');
                }
                
                // 更新进度
                const progress = ((i + 1) / total) * 100;
                processProgressBar.style.width = `${progress}%`;
            }
            
            if (processedImages.length === 0) {
                throw new Error('没有可拼接的有效图片');
            }
        }

        // 拼接单组图片（9张完整加载后绘制）
        function combineSingleGroup(groupImages, groupIdx, startNum, totalFiles) {
            return new Promise((resolve) => {
                // 等待组内所有图片加载完成
                const loadPromises = groupImages.map(imgData => {
                    return new Promise((resolve) => {
                        const img = new Image();
                        img.crossOrigin = 'anonymous';
                        img.onload = () => resolve({img: img, data: imgData});
                        img.onerror = () => resolve({img: null, data: imgData});
                        img.src = URL.createObjectURL(imgData.blob);
                    });
                });

                // 所有图片加载完成后统一绘制
                Promise.all(loadPromises).then(loadedImages => {
                    // 计算单张尺寸和拼图尺寸（3×3）
                    const singleW = loadedImages[0]?.data.width || CONFIG.BASE_W / 3;
                    const singleH = loadedImages[0]?.data.height || (CONFIG.BASE_W / 3) * (ratioConfig.h / ratioConfig.w);
                    const combineW = singleW * 3;
                    const combineH = singleH * 3;

                    // 创建拼图画布
                    const canvas = document.createElement('canvas');
                    canvas.width = combineW;
                    canvas.height = combineH;
                    const ctx = canvas.getContext('2d');
                    ctx.fillStyle = CONFIG.BG_COLOR;
                    ctx.fillRect(0, 0, combineW, combineH);

                    // 绘制9张图片（3×3网格，确保位置准确）
                    loadedImages.forEach((item, idx) => {
                        if (item.img) {
                            const col = idx % 3;
                            const row = Math.floor(idx / 3);
                            const x = col * singleW;
                            const y = row * singleH;
                            ctx.drawImage(item.img, x, y, singleW, singleH);
                        }
                    });

                    // 生成下载Blob
                    canvas.toBlob((blob) => {
                        const gStart = startNum + groupIdx * CONFIG.GROUP_NUM;
                        const gEnd = Math.min(
                            startNum + (groupIdx + 1) * CONFIG.GROUP_NUM - 1,
                            startNum + totalFiles - 1
                        );
                        const fileName = `${targetRatioSelect.value}拼接组${groupIdx + 1}（${gStart}-${gEnd}号）.jpg`;
                        resolve({
                            fileName: fileName,
                            downloadUrl: URL.createObjectURL(blob)
                        });
                    }, 'image/jpeg', 1.0);
                });
            });
        }

        // 批量拼接所有组
        async function batchCombineImages(startNum) {
            const totalProcessed = processedImages.length;
            const groupCount = Math.ceil(totalProcessed / CONFIG.GROUP_NUM);
            const results = [];

            for (let groupIdx = 0; groupIdx < groupCount; groupIdx++) {
                const start = groupIdx * CONFIG.GROUP_NUM;
                const end = Math.min((groupIdx + 1) * CONFIG.GROUP_NUM, totalProcessed);
                const groupImages = processedImages.slice(start, end);

                // 拼接当前组
                const groupResult = await combineSingleGroup(
                    groupImages, 
                    groupIdx, 
                    startNum, 
                    selectedFiles.length
                );
                results.push(groupResult);

                // 更新进度
                const progress = ((groupIdx + 1) / groupCount) * 100;
                combineProgressBar.style.width = `${progress}%`;
            }

            return results;
        }

        // 主流程
        async function startFullProcess() {
            let startNum = parseInt(startNumInput.value) || 1;
            startNum = Math.max(startNum, 1);
            startNumInput.value = startNum;

            // 重置结果区域
            resultArea.style.display = 'none';
            resultList.innerHTML = '';
            progressWrapper.style.display = 'block';
            processProgressBar.style.width = '0%';
            combineProgressBar.style.width = '0%';
            combineBtn.disabled = true;

            try {
                // 1. 批量处理所有图片（加序号）
                await batchProcessImages(startNum);
                
                // 2. 批量拼接所有组（9张一组）
                const results = await batchCombineImages(startNum);

                // 3. 显示结果
                resultArea.style.display = 'block';
                results.forEach(res => {
                    const item = document.createElement('div');
                    item.className = 'result-item';
                    item.innerHTML = `
                        <p class="item-name">${res.fileName}</p>
                        <a href="${res.downloadUrl}" download="${res.fileName}" class="download-link">点击下载</a>
                    `;
                    resultList.appendChild(item);
                });

                alert(`拼接完成！共处理${processedImages.length}张图片，生成${results.length}组${targetRatioSelect.value}拼图`);
            } catch (err) {
                alert(`拼接失败：${err.message}`);
            } finally {
                combineBtn.disabled = false;
                // 5秒后隐藏进度条
                setTimeout(() => {
                    progressWrapper.style.display = 'none';
                }, 5000);
            }
        }

        // 页面加载完成初始化
        window.onload = init;
    </script>
</body>
</html>
